<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>简途旅行</title>
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href="/img/logo.ico" rel="icon" type="image/x-icon" />
        <link rel="stylesheet" href="/master-Q2-4/css/tourism.scss?__inline" media="screen" title="no title" charset="utf-8">
    </head>
    <body>
        <header>
            <div class="back">后退</div>
            <div class="center">选择目的地</div>
            <div class="home">个人中心</div>
        </header>
        <div class="page-group">
            <div class="page-wrap">
                <div class="page">
                    <div class="info">
                        <div class="status">
                            <!-- 进行中添加progress，即将开始waiting，已结束不用添加 -->
                            <span class="progress">进行中</span>
                            <span>出行日期：2015-11-19</span>
                        </div>
                        <div class="line">
                            川主寺-旧亚楠-大教堂往返车位套餐
                        </div>
                    </div>
                    <div class="qrcode">
                        <div>
                            <p>
                                <span>
                                    <img src="/img/qrcode.png"/>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="operation">
                        <span>
                            <img class="w27" src="/img/tourism-seat.png"/>
                            <div>
                                在线选座
                            </div>
                        </span>
                        <span>
                            <img class="w27" src="/img/tourism-detail.png"/>
                            <div>
                                线路详情
                            </div>
                        </span>
                        <span>
                            <img class="w36" src="/img/tourism-play.png"/>
                            <div>
                                途中玩乐
                            </div>
                        </span>
                        <span class="disabled">
                            <img class="w32" src="/img/tourism-evaluate.png"/>
                            <div>
                                行程点评
                            </div>
                        </span>
                    </div>
                    <div class="page-footer">
                        <span>查看更早行程</span>
                        <div class="footer-dots">
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot active"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-wrap">
                <div class="page">
                    <div class="info">
                        <div class="status">
                            <!-- 进行中添加progress，即将开始waiting，已结束不用添加 -->
                            <span class="progress">进行中111</span>
                            <span>出行日期：2015-11-19</span>
                        </div>
                        <div class="line">
                            川主寺-旧亚楠-大教堂往返车位套餐
                        </div>
                    </div>
                    <div class="qrcode">
                        <div>
                            <p>
                                <span>
                                    <img src="/img/qrcode.png"/>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="operation">
                        <span>
                            <img class="w27" src="/img/tourism-seat.png"/>
                            <div>
                                在线选座
                            </div>
                        </span>
                        <span>
                            <img class="w27" src="/img/tourism-detail.png"/>
                            <div>
                                线路详情
                            </div>
                        </span>
                        <span>
                            <img class="w36" src="/img/tourism-play.png"/>
                            <div>
                                途中玩乐
                            </div>
                        </span>
                        <span class="disabled">
                            <img class="w32" src="/img/tourism-evaluate.png"/>
                            <div>
                                行程点评
                            </div>
                        </span>
                    </div>
                </div>
            </div>
            <div class="page-wrap">
                <div class="page">
                    <div class="info">
                        <div class="status">
                            <!-- 进行中添加progress，即将开始waiting，已结束不用添加 -->
                            <span class="progress">进行中222</span>
                            <span>出行日期：2015-11-19</span>
                        </div>
                        <div class="line">
                            川主寺-旧亚楠-大教堂往返车位套餐
                        </div>
                    </div>
                    <div class="qrcode">
                        <div>
                            <p>
                                <span>
                                    <img src="/img/qrcode.png"/>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="operation">
                        <span>
                            <img class="w27" src="/img/tourism-seat.png"/>
                            <div>
                                在线选座
                            </div>
                        </span>
                        <span>
                            <img class="w27" src="/img/tourism-detail.png"/>
                            <div>
                                线路详情
                            </div>
                        </span>
                        <span>
                            <img class="w36" src="/img/tourism-play.png"/>
                            <div>
                                途中玩乐
                            </div>
                        </span>
                        <span class="disabled">
                            <img class="w32" src="/img/tourism-evaluate.png"/>
                            <div>
                                行程点评
                            </div>
                        </span>
                    </div>
                </div>
            </div>
            <div class="page-wrap">
                <div class="page">
                    <div class="info">
                        <div class="status">
                            <!-- 进行中添加progress，即将开始waiting，已结束不用添加 -->
                            <span class="progress">进行中333</span>
                            <span>出行日期：2015-11-19</span>
                        </div>
                        <div class="line">
                            川主寺-旧亚楠-大教堂往返车位套餐
                        </div>
                    </div>
                    <div class="qrcode">
                        <div>
                            <p>
                                <span>
                                    <img src="/img/qrcode.png"/>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="operation">
                        <span>
                            <img class="w27" src="/img/tourism-seat.png"/>
                            <div>
                                在线选座
                            </div>
                        </span>
                        <span>
                            <img class="w27" src="/img/tourism-detail.png"/>
                            <div>
                                线路详情
                            </div>
                        </span>
                        <span>
                            <img class="w36" src="/img/tourism-play.png"/>
                            <div>
                                途中玩乐
                            </div>
                        </span>
                        <span class="disabled">
                            <img class="w32" src="/img/tourism-evaluate.png"/>
                            <div>
                                行程点评
                            </div>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-footer">
            <span>查看更早行程</span>
            <div class="footer-dots">
                <span class="page-dot"></span>
                <span class="page-dot"></span>
                <span class="page-dot"></span>
                <span class="page-dot"></span>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="/common/js/zepto.min.js"></script>
    <script type="text/javascript" src="/common/js/alert.js"></script>
    <script type="text/javascript">
    (function (doc, win) {
        var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    var style;
                    if (style = document.getElementById("forhtml")) {
                        style.parentNode.removeChild(style);
                    }
                    style = document.createElement("style");
                    style.id = "forhtml";
                    document.head.appendChild(style);
                    style.appendChild(document.createTextNode("html{font-size:" + 20 * (clientWidth / 320) + "px !important;}"));
                    docEl.style.fontSize = 20 * (clientWidth / 320) + 'px';
                };
        recalc();
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    (function(){
        function Page(ele,option){
            var defaultOption = {
                initIndex : 1 ,//初始化哪一页
                dots : false
            }
            var _ = this;
            _.option = $.extend(defaultOption,option);
            _.ele = ele;
            //pages的zepto对象
            _.pages = _.ele.find('.page-wrap');
            //当前在哪一页
            _.currentIndex = parseInt(_.option.initIndex-1);
            //最后一页
            _.last = _.ele.find('.page-wrap').length - 1;
            //初始化dots
            if(_.option.dots){
                $('.page-dot').removeClass('active');
                $('.page-dot').eq(_.currentIndex).addClass('active');
            }
            _.ele.find('.page-wrap').eq(_.currentIndex).addClass('page-current');
            var startX,endX;
            document.addEventListener('touchstart',function(event){
                startX = event.touches[0].pageX;
            })
            document.addEventListener('touchmove',function(event){
                event.preventDefault();
                endX = event.touches[0].pageX;
            })
            document.addEventListener('touchend',function(event){
                if(Math.abs(startX-endX)>30 && (startX-endX)>0){
                    _.swipe('left');
                }else if(Math.abs(startX-endX)>30 && (startX-endX)<0){
                    _.swipe('right');
                }
            })
            _.swipe = function(dir){
                switch (dir) {
                    case 'left':
                        if(_.last != _.currentIndex){
                            _.pages.eq(_.currentIndex).removeClass('page-current').addClass('center-to-left');
                            _.pages.eq(_.currentIndex+1).addClass('page-current');
                            var s = _.currentIndex;
                            if(_.option.dots){
                                $('.page-dot').removeClass('active');
                                $('.page-dot').eq(_.currentIndex+1).addClass('active');
                            }
                            setTimeout(function(){
                                _.pages.eq(s+1).addClass('right-to-center');
                            },10)
                            _.currentIndex += 1;
                            setTimeout(function(){
                                _.pages.eq(s).removeClass('center-to-left');
                                _.pages.eq(s+1).removeClass('right-to-center');
                            },400)
                        }
                        break;
                    case 'right':
                        if(_.currentIndex != 0){
                            _.pages.eq(_.currentIndex).removeClass('page-current').addClass('center-to-right');
                            _.pages.eq(_.currentIndex-1).addClass('page-current');
                            // _.pages.eq(_.currentIndex-1).addClass('page-current left-to-center');
                            var s = _.currentIndex;
                            if(_.option.dots){
                                $('.page-dot').removeClass('active');
                                $('.page-dot').eq(_.currentIndex-1).addClass('active');
                            }
                            setTimeout(function(){
                                _.pages.eq(s-1).addClass('left-to-center');
                            },10)
                            _.currentIndex -= 1;
                            setTimeout(function(){
                                _.pages.eq(s).removeClass('center-to-right');
                                _.pages.eq(s-1).removeClass('left-to-center');
                            },400)
                        }
                        break;
                }
            }
        }
        $.fn.pageInit = function(option){
            var page = new Page(this,option);
            return page.currentIndex
        }
    })(Zepto)
    $('.page-group').pageInit({
        initIndex : 1,
        dots : true
    });
    </script>
</html>
